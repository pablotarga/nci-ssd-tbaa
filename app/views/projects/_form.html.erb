<%= form_with(model: project) do |f| %>
  <%= render 'shared/alerts' %>

  <div class="row">
    <div class="col-md-8">

      <div class="form-group">
        <%= f.label :title %>
        <%= f.text_field :title, class: 'form-control' %>
      </div>

      <div class="form-group">
        <%= f.label :short_description %>
        <%= f.text_field :short_description, class: 'form-control' %>
      </div>

      <div class="form-group">
        <%= f.label :description %>
        <%= f.text_area :description, class: 'form-control', rows: 10 %>
      </div>

      <div class="form-group">
        <%= f.label :student_id %>
        <%= f.collection_select(:student_id, User.student, :id, :name_with_email, {prompt: true}, class: 'form-control', disabled: f.object.persisted? && f.object.student_id.present?) %>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <%= f.label :due_at %>
            <%= f.date_field :due_at, class: 'form-control' %>
          </div>
        </div>

        <div class="col-md-6">
          <div class="form-group">
            <%= f.label :status %>
            <%= f.select(:status, Project.statuses.keys.map{|e| [e.humanize, e]}, {prompt: true}, class: 'form-control') %>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <label>Tasks</label>
      <% 3.times do |i| %>
        <div class="form-group">
          <div class="d-flex w-100 align-items-center">
            <span class="task-subform-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus aliquet in sem eu posuere. N</span>
            <%= content_tag :span, content_tag(:i, nil, class: 'fas fa-fw fa-pencil-alt'), class: 'btn btn-light', data: {target: "#edit_task_modal_#{i}", toggle: "modal"} %>
            <%= content_tag :span, content_tag(:i, nil, class: 'fas fa-fw fa-trash'), class: 'btn btn-danger ml-2' %>
          </div>
        </div>

        <div class="modal fade" id="edit_task_modal_<%= i %>" tabindex="-1" role="dialog" data-backdrop="static">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-body">
                <h5 class="modal-title" id="exampleModalLabel">Modal title for item <%= i %></h5>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-success btn-block btn-lg" data-dismiss="modal">Done</button>
              </div>
            </div>
          </div>
        </div>
      <% end %>


    </div>
  </div>
  <%= f.submit "Save", class: 'btn btn-success btn-lg mt-3' %>
<% end %>
